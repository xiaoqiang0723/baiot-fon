(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a200e938"],{"030f":function(e,t,a){"use strict";a("d3f8")},"07b0":function(e,t,a){},1086:function(e,t,a){"use strict";a.d(t,"d",(function(){return s})),a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return r}));a("99af");var s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e||0===e?e+t:"-"},i=function(e,t){return parseInt(e,10)&&parseInt(t,10)},n=function(e,t){return i(e,t)?"".concat(e,"-").concat(t):"-"},r=function(e){return e?"K".concat(parseInt(e,10),"+").concat(parseInt(e%1*1e3,10)):"-"}},3511:function(e,t){var a=TypeError,s=9007199254740991;e.exports=function(e){if(e>s)throw a("Maximum allowed index exceeded");return e}},"39ea":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("d3b7"),a("159b");var s=a("4360"),i={OCCUPY_MANAGE_OPERATE:2015,OCCUPY_MANAGE_LIST:2026,OCCUPY_EQUIP_LIST:2027,OCCUPY_EQUIP_OPERATE:2028,GUARDRAIL_WARNING_OPERATE:2024,GUARDRAIL_WARNING_LIST:2029,GUARDRAIL_EQUIP_LIST:2030,GUARDRAIL_EQUIP_OPERATE:2031,GUARDRAIL_EQUIP_ADD:2019,GUARDRAIL_STOCK_ADD:2040,GUARDRAIL_STOCK_LIST:2041,GUARDRAIL_STOCK_BIND:2042,GUARDRAIL_STOCK_DELETE:2043,GUARDRAIL_EVENTS_LIST:2034,GUARDRAIL_ONE_STOCK_ADD:2046,GUARDRAIL_ONE_STOCK_LIST:2047,GUARDRAIL_ONE_STOCK_BIND:2048,GUARDRAIL_ONE_STOCK_DELETE:2049,USER_SEARCH_LIST:2051},n=function(e){var t=s["a"].state.permission.authList,a=!1;return t.forEach((function(t){t.menuId===i[e]&&(a=!0)})),a}},"408a":function(e,t,a){var s=a("e330");e.exports=s(1..valueOf)},4476:function(e,t,a){"use strict";a("f62c")},"4d31":function(e,t,a){},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var s=a("e330"),i=a("1d80"),n=a("577e"),r=a("5899"),o=s("".replace),c="["+r+"]",l=RegExp("^"+c+c+"*"),u=RegExp(c+c+"*$"),d=function(e){return function(t){var a=n(i(t));return 1&e&&(a=o(a,l,"")),2&e&&(a=o(a,u,"")),a}};e.exports={start:d(1),end:d(2),trim:d(3)}},"63bd":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"equip-stock-contain"},[a("article",{staticClass:"equip-stock-search clearfix"},[a("div",{staticClass:"equip-stock-search-inner aiot-search-contain clearfix"},[a("div",{staticClass:"search-module clearfix"},[a("span",{staticClass:"search-module-name"},[e._v("IMEI号")]),a("span",{staticClass:"search-module-value"},[a("el-input",{attrs:{placeholder:"请输入IMEI号",clearable:""},model:{value:e.epuipId,callback:function(t){e.epuipId=t},expression:"epuipId"}})],1)]),a("div",{staticClass:"search-module clearfix"},[a("span",{staticClass:"search-module-name"},[e._v("绑定状态")]),a("span",{staticClass:"search-module-value"},[a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.equipStatus,callback:function(t){e.equipStatus=t},expression:"equipStatus"}},[a("el-option",{attrs:{label:"未绑定",value:0}}),a("el-option",{attrs:{label:"已绑定",value:1}})],1)],1)]),a("div",{staticClass:"search-module clearfix"},[a("span",{staticClass:"search-module-name"},[e._v("所属用户")]),a("span",{staticClass:"search-module-value"},[a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}},e._l(e.userList,(function(t){return a("el-option",{key:t.userId,attrs:{label:t.userName,value:t.userId}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.userName))]),a("span",{staticStyle:{float:"left",color:"#8492a6","font-size":"12px"}},[e._v("("+e._s(t.loginName)+")")])])})),1)],1)]),a("div",{staticClass:"search-button",on:{click:e.getData}}),e.isAdd?a("div",{staticClass:"add-button"},[a("el-upload",{attrs:{action:"/api/gr/dev/batchImport","show-file-list":!1,"on-success":e.onSuccess,"on-error":e.onError,headers:e.myHeaders,"with-credentials":""}},[a("div",[e._v("导入设备")])])],1):e._e()]),e.isBind?a("div",{staticClass:"search-right"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.bindUser(0)}}},[e._v("批量绑定")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.bindUser(1)}}},[e._v("批量解绑")])],1):e._e()]),a("article",{ref:"listTable",staticClass:"equip-stock-list table-wrapper"},[a("AiotList",{attrs:{totalNum:e.totalNum,isFull:!0,sizeType:1},on:{changePage:e.changePage}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"header-row-class-name":"aiot-table-list-header","row-class-name":"aiot-table-list-row","tooltip-effect":"light",height:"100%"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._l(e.columns,(function(t,s){return[a("el-table-column",{key:t.key+s,attrs:{prop:t.key,label:t.label,"min-width":t.width,"show-overflow-tooltip":!0,formatter:e.formatterColumn}})]})),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{color:"#0cd3d2"},attrs:{type:"text"},on:{click:function(a){return e.showDetail(t.row)}}},[e._v("修改")]),e.isDelete?a("el-button",{staticStyle:{color:"#eb577d"},attrs:{type:"text"},on:{click:function(a){return e.deleteEquip(t.row)}}},[e._v("删除")]):e._e()]}}])})],2)],1)],1),a("el-dialog",{attrs:{visible:e.detailShow,width:"800px",title:"设备详情",center:"","custom-class":"aiot-modal","append-to-body":!0},on:{"update:visible":function(t){e.detailShow=t}}},[e.detailShow?a("StockAdd",{attrs:{devId:e.detailData.devId},on:{close:e.closeDetail}}):e._e()],1),a("el-dialog",{attrs:{visible:e.bindShow,width:"500px",title:"请选择绑定用户",center:"","custom-class":"aiot-modal add-user","append-to-body":!0},on:{"update:visible":function(t){e.bindShow=t}}},[e.bindShow?a("div",{staticClass:"brandreth-equip-add-contain clearfix"},[a("div",{staticClass:"brandreth-equip-add-li clearfix"},[a("span",{staticClass:"li-name"},[e._v("绑定用户")]),a("span",{staticClass:"li-value"},[a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.bindUserId,callback:function(t){e.bindUserId=t},expression:"bindUserId"}},e._l(e.userList,(function(t){return a("el-option",{key:t.userId,attrs:{label:t.userName,value:t.userId}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.userName))]),a("span",{staticStyle:{float:"left",color:"#8492a6","font-size":"12px"}},[e._v("("+e._s(t.loginName)+")")])])})),1)],1)]),a("div",{staticClass:"brandreth-equip-add-li brandreth-equip-add-li-buttons"},[a("el-button",{attrs:{type:"primary"},on:{click:e.changeBindUser}},[e._v("确定")]),a("el-button",{staticClass:"brandreth-equip-add-button"},[e._v("取消")])],1)]):e._e()])],1)},i=[],n=a("c7eb"),r=a("1da1"),o=a("5530"),c=(a("d81d"),a("82cb")),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add clearfix"},[a("el-form",{ref:"form",attrs:{"label-width":"100px"}},[a("el-form-item",{staticClass:"form-item float-left",attrs:{prop:"id",label:"序号"}},[a("div",{staticClass:"value input"},[e._v(e._s(e.info.id))])]),a("el-form-item",{staticClass:"form-item float-left",attrs:{prop:"devId",label:"设备编号"}},[a("div",{staticClass:"value input"},[e._v(e._s(e.info.devId))])]),a("el-form-item",{staticClass:"form-item float-left",attrs:{prop:"roleName",label:"IMEI"}},[a("div",{staticClass:"value input"},[e._v(e._s(e.info.imei))])]),a("el-form-item",{staticClass:"form-item float-left",attrs:{prop:"addTime",label:"创建时间"}},[a("div",{staticClass:"value input"},[e._v(e._s(e.info.addTime))])]),e.isBind?a("el-form-item",{staticClass:"form-item float-left",attrs:{label:"添加用户"}},[a("el-select",{attrs:{filterable:"","reserve-keyword":"",placeholder:"请选择需要绑定的用户"},on:{change:e.changeUser},model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}},e._l(e.userList,(function(t){return a("el-option",{key:t.userId,attrs:{label:t.userName,value:t.userId}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.userName))]),a("span",{staticStyle:{float:"left",color:"#8492a6","font-size":"12px"}},[e._v("("+e._s(t.loginName)+")")])])})),1),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){return e.changeBindUser(0)}}},[e._v("添加")])],1):e._e(),a("el-form-item",{staticClass:"form-item float-right",attrs:{label:"绑定用户"}},[a("div",{staticClass:"table-wrapper"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.info.userIds,"tooltip-effect":"dark",height:"280px","header-row-class-name":"aiot-table-list-header","row-class-name":"aiot-table-list-row",size:"mini",fit:"","element-loading-background":"rgba(8, 37, 51, 0.5)"}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),e._l(e.columns,(function(t,s){return[a("el-table-column",{key:t.key+s,attrs:{prop:t.key,type:t.type,label:t.label,"min-width":t.width,"show-overflow-tooltip":"",formatter:e.formatterColumn}})]})),e.isBind?a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{color:"#eb577d"},attrs:{type:"text",size:"small"},on:{click:function(a){return e.changeBindUser(1,t.row)}}},[e._v("解除")])]}}],null,!1,1504349084)}):e._e()],2)],1)])],1)],1)},u=[],d=a("2f62"),f=a("4bff"),p=a("1086"),b=a("39ea"),m={props:["devId"],data:function(){return{isBind:Object(b["a"])("GUARDRAIL_STOCK_BIND"),info:{},userId:"",columns:[{label:"用户账号",key:"loginName",width:120},{label:"用户名称",key:"userName",width:120}]}},computed:Object(o["a"])({},Object(d["b"])({userList:function(e){return e.globals.userList}})),watch:{userList:function(){this.info.userIds=this.userList.userIds.map((function(e){return e.userId}))}},mounted:function(){this.queryStockDeviceInfo()},methods:{changeBindUser:function(e,t){var a=this;return Object(r["a"])(Object(n["a"])().mark((function s(){var i;return Object(n["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a.info.devId&&(e||a.userId)){s.next=2;break}return s.abrupt("return");case 2:return s.next=4,Object(f["e"])({deviceIds:[a.info.devId],isRelieve:e,userId:e?t.userId:a.userId});case 4:i=s.sent,i>0?(a.$message({type:"success",message:"操作成功"}),a.userId="",a.queryStockDeviceInfo()):a.$message({type:"error",message:"操作失败"});case 6:case"end":return s.stop()}}),s)})))()},onSubmit:function(){console.log("submit!")},queryStockDeviceInfo:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(f["o"])({devId:e.devId});case 2:a=t.sent,e.info=a||{};case 4:case"end":return t.stop()}}),t)})))()},changeUser:function(e){console.log(e)},removeUser:function(e){console.log("removeUser",e)},formatterColumn:function(e,t){var a=t.property,s="";switch(a){default:s=e[a];break}return Object(p["d"])(s)}}},h=m,v=(a("7c7e"),a("4476"),a("2877")),g=Object(v["a"])(h,l,u,!1,null,"42634c31",null),I=g.exports,_={components:{AiotList:c["a"],StockAdd:I},data:function(){return{isSearchUserList:Object(b["a"])("USER_SEARCH_LIST"),isSearchList:Object(b["a"])("GUARDRAIL_ONE_STOCK_LIST"),isAdd:Object(b["a"])("GUARDRAIL_ONE_STOCK_ADD"),isBind:Object(b["a"])("GUARDRAIL_ONE_STOCK_BIND"),isDelete:Object(b["a"])("GUARDRAIL_ONE_STOCK_DELETE"),epuipId:"",equipStatus:[],userId:"",bindUserId:"",totalNum:0,pageSize:10,pageNumber:1,tableData:[],columns:[{label:"序号",key:"id",width:100},{label:"IMEI",key:"imei",width:200},{label:"绑定状态",key:"status",width:100}],multipleSelection:[],detailShow:!1,bindShow:!1,bindStatus:""}},computed:Object(o["a"])(Object(o["a"])({},Object(d["b"])({userList:function(e){e.globle.userList}})),Object(d["b"])({userList:function(e){return e.globals.userList},myHeaders:function(e){return{Authorization:e.permission.token}}})),methods:{changeBindUser:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a,s;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.bindUserId){t.next=3;break}return e.$message({type:"info",message:"请先选择绑定用户"}),t.abrupt("return");case 3:return a=e.multipleSelection.map((function(e){return e.devId})),t.next=6,Object(f["e"])({deviceIds:a,isRelieve:e.bindStatus,userId:e.bindUserId});case 6:s=t.sent,console.log(s),s>0?(e.$message({type:"success",message:"操作成功"}),e.bindShow=!1,e.getData()):e.$message({type:"error",message:"操作失败"});case 9:case"end":return t.stop()}}),t)})))()},bindUser:function(e){this.multipleSelection.length<1?this.$message({type:"info",message:"请先选择设备"}):(this.bindStatus=e,this.bindShow=!0)},changePage:function(e){switch(e.type){case"number":this.pageNumber=e.value;break;case"size":this.pageSize=e.value;break;default:break}this.getData()},onSuccess:function(e){var t=this;console.log("success",e),"0"===e.code?(this.$message({message:"导入成功!",type:"success"}),this.getData()):"00003"===e.code?this.$msgbox.alert("设备编号：".concat(e.msg,"无法添加，请修改后再次导入"),"导入失败",{confirmButtonText:"确定",callback:function(){t.$message({message:"导入失败!",type:"error"})}}):this.$message({message:"导入失败!",type:"error"})},onError:function(){this.$message({message:"导入失败!",type:"error"})},getData:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a,s;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isSearchList){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Object(f["n"])({userId:e.userId,imei:e.epuipId,generation:1,status:e.equipStatus,pageNum:e.pageNumber,pageSize:e.pageSize});case 4:s=t.sent,console.log(s),e.tableData=(null===s||void 0===s?void 0:s.data)||[],e.totalNum=(null===s||void 0===s||null===(a=s.meta)||void 0===a?void 0:a.count)||0;case 8:case"end":return t.stop()}}),t)})))()},deleteEquip:function(e){var t=this;return Object(r["a"])(Object(n["a"])().mark((function a(){var s;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(f["d"])({id:e.id,devId:e.devId});case 2:s=a.sent,console.log(s),s>0?(t.$message({type:"success",message:"操作成功"}),t.getData()):t.$message({type:"error",message:"操作失败"});case 5:case"end":return a.stop()}}),a)})))()},closeDetail:function(){this.detailShow=!1},showDetail:function(e){this.detailData=e,this.detailShow=!0},handleSelectionChange:function(e){this.multipleSelection=e},formatterColumn:function(e,t){var a=t.property,s="",i={1:"已绑定",0:"未绑定"};switch(a){case"status":s=i[e[a]];break;default:s=e[a];break}return Object(p["d"])(s)}},mounted:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isSearchUserList&&e.$store.dispatch("getUserList"),t.next=3,e.getData();case 3:case"end":return t.stop()}}),t)})))()}},S=_,w=(a("bb3c"),a("d0fa"),a("7ea6f"),a("030f"),Object(v["a"])(S,s,i,!1,null,"7b84dfe0",null));t["default"]=w.exports},"7c7e":function(e,t,a){"use strict";a("e0bb")},"7ea6f":function(e,t,a){"use strict";a("4d31")},"82cb":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"aiot-list-contain"},[e.isFull?e._e():a("div",{class:["aiot-list-control",{active:!e.isShowList}],on:{click:e.toggleList}}),a("div",{class:["aiot-list-content",{full:e.isFull}]},[a("div",{staticClass:"aiot-list-table"},[a("div",{staticClass:"aiot-list-table-header-mask"}),e._t("default")],2),e.isShowList?a("div",{staticClass:"aiot-list-pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.pageNumber,"page-sizes":1===e.sizeType?[10,20,30]:[6,12],"page-size":6,layout:"total, sizes, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()])])},i=[],n=(a("a9e3"),{props:{totalNum:{type:Number,default:0},isFull:{type:Boolean,default:!1},sizeType:{type:Number,default:0}},data:function(){return{isShowList:!0,pageSize:6,pageNumber:1}},methods:{toggleList:function(){this.isShowList=!this.isShowList,this.$emit("showList",this.isShowList)},handleSizeChange:function(e){this.pageSize=e,this.$emit("changePage",{type:"size",value:this.pageSize})},handleCurrentChange:function(e){this.pageNumber=e,this.$emit("changePage",{type:"number",value:this.pageNumber})}}}),r=n,o=(a("bfd4"),a("2877")),c=Object(o["a"])(r,s,i,!1,null,"7fe7058a",null);t["a"]=c.exports},"99af":function(e,t,a){"use strict";var s=a("23e7"),i=a("d039"),n=a("e8b5"),r=a("861d"),o=a("7b0b"),c=a("07fa"),l=a("3511"),u=a("8418"),d=a("65f0"),f=a("1dde"),p=a("b622"),b=a("2d00"),m=p("isConcatSpreadable"),h=b>=51||!i((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),v=f("concat"),g=function(e){if(!r(e))return!1;var t=e[m];return void 0!==t?!!t:n(e)},I=!h||!v;s({target:"Array",proto:!0,arity:1,forced:I},{concat:function(e){var t,a,s,i,n,r=o(this),f=d(r,0),p=0;for(t=-1,s=arguments.length;t<s;t++)if(n=-1===t?r:arguments[t],g(n))for(i=c(n),l(p+i),a=0;a<i;a++,p++)a in n&&u(f,p,n[a]);else l(p+1),u(f,p++,n);return f.length=p,f}})},a9e3:function(e,t,a){"use strict";var s=a("83ab"),i=a("da84"),n=a("e330"),r=a("94ca"),o=a("cb2d"),c=a("1a2d"),l=a("7156"),u=a("3a9b"),d=a("d9b5"),f=a("c04e"),p=a("d039"),b=a("241c").f,m=a("06cf").f,h=a("9bf2").f,v=a("408a"),g=a("58a8").trim,I="Number",_=i[I],S=_.prototype,w=i.TypeError,y=n("".slice),C=n("".charCodeAt),O=function(e){var t=f(e,"number");return"bigint"==typeof t?t:A(t)},A=function(e){var t,a,s,i,n,r,o,c,l=f(e,"number");if(d(l))throw w("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=g(l),t=C(l,0),43===t||45===t){if(a=C(l,2),88===a||120===a)return NaN}else if(48===t){switch(C(l,1)){case 66:case 98:s=2,i=49;break;case 79:case 111:s=8,i=55;break;default:return+l}for(n=y(l,2),r=n.length,o=0;o<r;o++)if(c=C(n,o),c<48||c>i)return NaN;return parseInt(n,s)}return+l};if(r(I,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var k,E=function(e){var t=arguments.length<1?0:_(O(e)),a=this;return u(S,a)&&p((function(){v(a)}))?l(Object(t),a,E):t},N=s?b(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),L=0;N.length>L;L++)c(_,k=N[L])&&!c(E,k)&&h(E,k,m(_,k));E.prototype=S,S.constructor=E,o(i,I,E,{constructor:!0})}},bb3c:function(e,t,a){"use strict";a("07b0")},bfd4:function(e,t,a){"use strict";a("dd6c")},d0fa:function(e,t,a){"use strict";a("f861")},d3f8:function(e,t,a){},dd6c:function(e,t,a){},e0bb:function(e,t,a){},f62c:function(e,t,a){},f861:function(e,t,a){}}]);