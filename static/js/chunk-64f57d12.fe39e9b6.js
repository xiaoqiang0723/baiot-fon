(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64f57d12"],{"11c8":function(t,e,n){"use strict";n("94b8")},"428f":function(t,e,n){"use strict";n("d3be")},4789:function(t,e,n){"use strict";var s=n("a230"),o=n("204f"),a=n("e384"),i=n("ef68"),c=n("a83a"),r=n("2566"),l=n("560b"),u=n("32af"),d=n("9b32"),f=n("ae43"),m=n("4213"),h=f("isConcatSpreadable"),p=9007199254740991,b="Maximum allowed index exceeded",v=m>=51||!o((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),w=d("concat"),g=function(t){if(!i(t))return!1;var e=t[h];return void 0!==e?!!e:a(t)},k=!v||!w;s({target:"Array",proto:!0,forced:k},{concat:function(t){var e,n,s,o,a,i=c(this),d=u(i,0),f=0;for(e=-1,s=arguments.length;e<s;e++)if(a=-1===e?i:arguments[e],g(a)){if(o=r(a),f+o>p)throw TypeError(b);for(n=0;n<o;n++,f++)n in a&&l(d,f,a[n])}else{if(f>=p)throw TypeError(b);l(d,f++,a)}return d.length=f,d}})},"94b8":function(t,e,n){},9616:function(t,e,n){},c63c:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"aiot-contain"},[n("header",{staticClass:"aiot-contain-header"},[n("Navigation")],1),n("main",{staticClass:"aiot-contain-content"},[n("nav",{staticClass:"aiot-content-menu"},[n("MenuList")],1),n("main",{staticClass:"aiot-content-body"},[n("router-view")],1)]),n("SocketMessage")],1)},o=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"aiot-header-contain"},[n("article",{staticClass:"header-lf"},[n("div",{staticClass:"aiot-header-name"},[t._v(t._s(t.title))])]),n("article",{staticClass:"header-lr"},[n("div",{staticClass:"userLand"},[n("el-dropdown",{on:{command:t.handleCommand}},[n("span",{staticClass:"el-dropdown-link"},[t._v(" "+t._s(t.userInfo.userName)),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"logout"}},[t._v("退出")])],1)],1)],1)])])},i=[],c=n("e9ff"),r=n("06c4"),l=(n("e186"),n("bbfb")),u=n("7736"),d={name:"Nacigation",data:function(){return{title:"车路协同系统信息平台"}},computed:Object(r["a"])({},Object(u["b"])({userInfo:function(t){return t.permission.userInfo}})),methods:{handleCommand:function(t){switch(t){case"logout":this.logout();break;default:break}},logout:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(123),e.next=3,Object(l["c"])();case 3:n=e.sent,200===n.code&&(t.$message({type:"success",message:n.msg}),t.$store.dispatch("logout"),t.$router.push({path:"/login"}));case 5:case"end":return e.stop()}}),e)})))()}}},f=d,m=(n("e9b0"),n("cba8")),h=Object(m["a"])(f,a,i,!1,null,"a2b13b14",null),p=h.exports,b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"aiot-menu-contain"},[n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{router:"",collapse:t.isCollapse,"default-active":t.activeIndex},on:{open:t.handleOpen,close:t.handleClose,select:t.handleSelect}},[t._l(t.menuList,(function(e){return[e.children&&e.children.length?n("el-submenu",{key:e.path,attrs:{index:e.path,disabled:e.disabled}},[n("template",{slot:"title"},[n("span",{staticClass:"icon"},[n("i",{staticClass:"iconfont",class:["iconfont",e.icon]})]),n("span",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))])]),t._l(e.children,(function(e){return n("el-menu-item",{key:e.name,attrs:{index:e.path,disabled:e.disabled}},[t._v(" "+t._s(e.name)+" ")])}))],2):n("el-menu-item",{key:e.path,attrs:{index:e.path,disabled:e.disabled}},[n("template",{slot:"title"},[n("span",{staticClass:"icon"},[n("i",{staticClass:"iconfont",class:["iconfont",e.icon]})]),n("span",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))])])],2)]}))],2)],1)},v=[],w=(n("aa0c"),n("d30f"),{name:"Menu",data:function(){return{activeIndex:this.$route.path,menuList:[],isCollapse:!1}},computed:{asyncRouter:function(){return this.$store.state.permission.asyncRouter[0].children}},watch:{asyncRouter:{handler:function(){var t=this.asyncRouter;this.formatterList(t),console.log("menuList"),this.menuList=t},deep:!0}},mounted:function(){var t=this.asyncRouter;this.formatterList(t),this.menuList=t},methods:{handleOpen:function(){},handleClose:function(){},handleSelect:function(t,e){console.log(t,e)},formatterList:function(t){var e=this;t.forEach((function(t){t.name=t.meta.name,t.path=t.meta.path,t.icon=t.meta.icon,t.id=t.meta.id,t.children&&t.children.length&&e.formatterList(t.children)}))}}}),g=w,k=(n("428f"),Object(m["a"])(g,b,v,!1,null,"64bd1edd",null)),C=k.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},y=[],x=(n("4789"),{name:"test",data:function(){return{websock:null}},computed:Object(r["a"])({},Object(u["b"])({loginName:function(t){return t.permission.userInfo.loginName},token:function(t){return t.permission.token}})),mounted:function(){this.initWebSocket()},destroyed:function(){this.websock.close()},methods:{initWebSocket:function(){var t="ws://111.16.49.167:8083/api/gr/dev/imserver/".concat(this.token);this.websock=new WebSocket(t),this.websock.onmessage=this.websocketonmessage,this.websock.onopen=this.websocketonopen,this.websock.onerror=this.websocketonerror,this.websock.onclose=this.websocketclose},websocketonopen:function(){console.log("建立连接")},websocketonerror:function(){},websocketonmessage:function(t){if(t.data&&"连接成功"!==t.data){var e=JSON.parse(JSON.parse(t.data));"gr"===e.dev_type?this.$store.commit("getSocket",e):this.$notify({title:"警告",position:"bottom-right",message:"设备编号：".concat(e.devId," 发生").concat(e.eventInfo),offset:30})}},websocketsend:function(t){this.websock.send(t)},websocketclose:function(t){console.log("断开连接",t)}}}),O=x,L=Object(m["a"])(O,_,y,!1,null,null,null),S=L.exports,$={components:{Navigation:p,MenuList:C,SocketMessage:S},name:"Main"},j=$,I=(n("11c8"),Object(m["a"])(j,s,o,!1,null,null,null));e["default"]=I.exports},d3be:function(t,e,n){},e9b0:function(t,e,n){"use strict";n("9616")}}]);