(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3945553e"],{"11c8":function(t,e,n){"use strict";n("807b")},3511:function(t,e){var n=TypeError,s=9007199254740991;t.exports=function(t){if(t>s)throw n("Maximum allowed index exceeded");return t}},"428f0":function(t,e,n){"use strict";n("bae4")},"807b":function(t,e,n){},"99af":function(t,e,n){"use strict";var s=n("23e7"),o=n("d039"),a=n("e8b5"),i=n("861d"),c=n("7b0b"),r=n("07fa"),l=n("3511"),u=n("8418"),d=n("65f0"),f=n("1dde"),m=n("b622"),h=n("2d00"),b=m("isConcatSpreadable"),p=h>=51||!o((function(){var t=[];return t[b]=!1,t.concat()[0]!==t})),v=f("concat"),w=function(t){if(!i(t))return!1;var e=t[b];return void 0!==e?!!e:a(t)},k=!p||!v;s({target:"Array",proto:!0,arity:1,forced:k},{concat:function(t){var e,n,s,o,a,i=c(this),f=d(i,0),m=0;for(e=-1,s=arguments.length;e<s;e++)if(a=-1===e?i:arguments[e],w(a))for(o=r(a),l(m+o),n=0;n<o;n++,m++)n in a&&u(f,m,a[n]);else l(m+1),u(f,m++,a);return f.length=m,f}})},bae4:function(t,e,n){},c63c:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"aiot-contain"},[n("header",{staticClass:"aiot-contain-header"},[n("Navigation")],1),n("main",{staticClass:"aiot-contain-content"},[n("nav",{staticClass:"aiot-content-menu"},[n("MenuList")],1),n("main",{staticClass:"aiot-content-body"},[n("router-view")],1)]),n("SocketMessage")],1)},o=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"aiot-header-contain"},[n("article",{staticClass:"header-lf"},[n("div",{staticClass:"aiot-header-name"},[t._v(t._s(t.title))])]),n("article",{staticClass:"header-lr"},[n("div",{staticClass:"userLand"},[n("el-dropdown",{on:{command:t.handleCommand}},[n("span",{staticClass:"el-dropdown-link"},[t._v(" "+t._s(t.userInfo.userName)),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"logout"}},[t._v("退出")])],1)],1)],1)])])},i=[],c=n("c7eb"),r=n("1da1"),l=n("5530"),u=n("bbfb"),d=n("2f62"),f={name:"Nacigation",data:function(){return{title:"车路协同系统信息平台"}},computed:Object(l["a"])({},Object(d["b"])({userInfo:function(t){return t.permission.userInfo}})),methods:{handleCommand:function(t){switch(t){case"logout":this.logout();break;default:break}},logout:function(){var t=this;return Object(r["a"])(Object(c["a"])().mark((function e(){var n;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(123),e.next=3,Object(u["c"])();case 3:n=e.sent,200===n.code&&(t.$message({type:"success",message:n.msg}),t.$store.dispatch("logout"),t.$router.push({path:"/login"}));case 5:case"end":return e.stop()}}),e)})))()}}},m=f,h=(n("e9b0"),n("2877")),b=Object(h["a"])(m,a,i,!1,null,"a2b13b14",null),p=b.exports,v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"aiot-menu-contain"},[n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{router:"",collapse:t.isCollapse,"default-active":t.activeIndex},on:{open:t.handleOpen,close:t.handleClose,select:t.handleSelect}},[t._l(t.menuList,(function(e){return[e.children&&e.children.length?n("el-submenu",{key:e.path,attrs:{index:e.path,disabled:e.disabled}},[n("template",{slot:"title"},[n("span",{staticClass:"icon"},[n("i",{staticClass:"iconfont",class:["iconfont",e.icon]})]),n("span",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))])]),t._l(e.children,(function(e){return n("el-menu-item",{key:e.name,attrs:{index:e.path,disabled:e.disabled}},[t._v(" "+t._s(e.name)+" ")])}))],2):n("el-menu-item",{key:e.path,attrs:{index:e.path,disabled:e.disabled}},[n("template",{slot:"title"},[n("span",{staticClass:"icon"},[n("i",{staticClass:"iconfont",class:["iconfont",e.icon]})]),n("span",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))])])],2)]}))],2)],1)},w=[],k=(n("d3b7"),n("159b"),n("b0c0"),{name:"Menu",data:function(){return{activeIndex:this.$route.path,menuList:[],isCollapse:!1}},computed:{asyncRouter:function(){return this.$store.state.permission.asyncRouter[0].children}},watch:{asyncRouter:{handler:function(){var t=this.asyncRouter;this.formatterList(t),console.log("menuList"),this.menuList=t},deep:!0}},mounted:function(){var t=this.asyncRouter;this.formatterList(t),this.menuList=t},methods:{handleOpen:function(){},handleClose:function(){},handleSelect:function(t,e){console.log(t,e)},formatterList:function(t){var e=this;t.forEach((function(t){t.name=t.meta.name,t.path=t.meta.path,t.icon=t.meta.icon,t.id=t.meta.id,t.children&&t.children.length&&e.formatterList(t.children)}))}}}),g=k,C=(n("428f0"),Object(h["a"])(g,v,w,!1,null,"64bd1edd",null)),_=C.exports,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},O=[],x=(n("99af"),{name:"test",data:function(){return{websock:null}},computed:Object(l["a"])({},Object(d["b"])({loginName:function(t){return t.permission.userInfo.loginName},token:function(t){return t.permission.token}})),mounted:function(){this.initWebSocket()},destroyed:function(){this.websock.close()},methods:{initWebSocket:function(){var t="ws://111.16.49.167:8083/api/gr/dev/imserver/".concat(this.token);this.websock=new WebSocket(t),this.websock.onmessage=this.websocketonmessage,this.websock.onopen=this.websocketonopen,this.websock.onerror=this.websocketonerror,this.websock.onclose=this.websocketclose},websocketonopen:function(){console.log("建立连接")},websocketonerror:function(){},websocketonmessage:function(t){if(t.data&&"连接成功"!==t.data){var e=JSON.parse(JSON.parse(t.data));"gr"===e.dev_type?this.$store.commit("getSocket",e):this.$notify({title:"警告",position:"bottom-right",message:"设备编号：".concat(e.devId," 发生").concat(e.eventInfo),offset:30})}},websocketsend:function(t){this.websock.send(t)},websocketclose:function(t){console.log("断开连接",t)}}}),j=x,L=Object(h["a"])(j,y,O,!1,null,null,null),S=L.exports,$={components:{Navigation:p,MenuList:_,SocketMessage:S},name:"Main"},I=$,N=(n("11c8"),Object(h["a"])(I,s,o,!1,null,null,null));e["default"]=N.exports},dd66:function(t,e,n){},e9b0:function(t,e,n){"use strict";n("dd66")}}]);