(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7452ccb7"],{"0a34":function(a,t,e){"use strict";e("3218")},3218:function(a,t,e){},"6c48":function(a,t,e){},"780b":function(a,t,e){"use strict";e("6c48")},"7bc2":function(a,t,e){"use strict";e.d(t,"e",(function(){return i})),e.d(t,"d",(function(){return n})),e.d(t,"f",(function(){return c})),e.d(t,"b",(function(){return l})),e.d(t,"c",(function(){return r})),e.d(t,"a",(function(){return o}));var s=e("c1e1"),i=function(a){var t=a.deviceName,e=a.pageNum,i=a.pageSize;return Object(s["b"])("/api/rc/warning/occupyWaringList",{device_name:t,page_num:e,page_size:i})},n=function(a){var t=a.deviceId;return Object(s["b"])("/api/rc/warning/occupyWaringDetail",{device_id:t})},c=function(a){return Object(s["b"])("/api/rc/manager/list",a)},l=function(a){return Object(s["b"])("/api/rc/manager/deviceDetail",a)},r=function(a){return Object(s["b"])("/api/rc/manager/deviceHistory",a)},o=function(a){var t=a.deviceId,e=a.groupId,i=a.type;return Object(s["b"])("/api/rc/warning/ctlByDeviceId",{device_id:t,group_id:e,type:i})}},"82cb":function(a,t,e){"use strict";var s=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"aiot-list-contain"},[a.isFull?a._e():e("div",{class:["aiot-list-control",{active:!a.isShowList}],on:{click:a.toggleList}}),e("div",{class:["aiot-list-content",{full:a.isFull}]},[e("div",{staticClass:"aiot-list-table"},[e("div",{staticClass:"aiot-list-table-header-mask"}),a._t("default")],2),a.isShowList?e("div",{staticClass:"aiot-list-pagination"},[e("el-pagination",{attrs:{background:"","current-page":a.pageNumber,"page-sizes":1===a.sizeType?[10,20,30]:[6,12],"page-size":6,layout:"total, sizes, prev, pager, next, jumper",total:a.totalNum},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange}})],1):a._e()])])},i=[],n=(e("a9e3"),{props:{totalNum:{type:Number,default:0},isFull:{type:Boolean,default:!1},sizeType:{type:Number,default:0}},data:function(){return{isShowList:!0,pageSize:6,pageNumber:1}},methods:{toggleList:function(){this.isShowList=!this.isShowList,this.$emit("showList",this.isShowList)},handleSizeChange:function(a){this.pageSize=a,this.$emit("changePage",{type:"size",value:this.pageSize})},handleCurrentChange:function(a){this.pageNumber=a,this.$emit("changePage",{type:"number",value:this.pageNumber})}}}),c=n,l=(e("bfd4"),e("2877")),r=Object(l["a"])(c,s,i,!1,null,"7fe7058a",null);t["a"]=r.exports},bced:function(a,t,e){"use strict";e.d(t,"a",(function(){return i})),e.d(t,"b",(function(){return n})),e.d(t,"c",(function(){return c}));var s=e("c1e1"),i=function(a){return Object(s["a"])("/api/v1/dev/page_query",a)},n=function(a){return Object(s["a"])("/api/v1/event/page_query",a)},c=function(){return Object(s["a"])("/api/v1/dev/online_stats")}},bfd4:function(a,t,e){"use strict";e("dd6c")},c6ec:function(a,t,e){"use strict";e.r(t);var s=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"rescue-manage-contain"},[e("article",{staticClass:"rescue-manage-search"},[e("div",{staticClass:"rescue-manage-search-inner aiot-search-contain clearfix"},[e("div",{staticClass:"search-module clearfix"},[e("span",{staticClass:"search-module-name"},[a._v("地区")]),e("span",{staticClass:"search-module-value"},[e("el-cascader",{attrs:{placeholder:"请选择地区",options:a.locationData,props:{value:"name",label:"name"},filterable:""}})],1)]),e("div",{staticClass:"search-module clearfix"},[e("span",{staticClass:"search-module-name"},[a._v("时间")]),e("span",{staticClass:"search-module-value"},[e("el-date-picker",{attrs:{clearable:"",type:"date","value-format":"yyyy-MM-dd",format:"yyyy-MM-dd"},model:{value:a.time,callback:function(t){a.time=t},expression:"time"}})],1)]),e("div",{staticClass:"search-module clearfix"},[e("span",{staticClass:"search-module-name"},[a._v("状态")]),e("span",{staticClass:"search-module-value"},[e("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:a.status,callback:function(t){a.status=t},expression:"status"}},a._l(a.statusList,(function(a){return e("el-option",{key:a.value,attrs:{label:a.name,value:a.value}})})),1)],1)]),e("div",{staticClass:"search-module clearfix"},[e("span",{staticClass:"search-module-name"},[a._v("管理单位")]),e("span",{staticClass:"search-module-value"},[e("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:a.management,callback:function(t){a.management=t},expression:"management"}},a._l(a.managementList,(function(a){return e("el-option",{key:a.value,attrs:{label:a.name,value:a.value}})})),1)],1)]),e("div",{staticClass:"search-module clearfix"},[e("span",{staticClass:"search-module-name"},[a._v("编号")]),e("span",{staticClass:"search-module-value"},[e("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:a.id,callback:function(t){a.id=t},expression:"id"}})],1)]),e("div",{staticClass:"search-opearte clearfix"},[e("div",{staticClass:"search-button",on:{click:a.searchData}})])])]),e("article",{ref:"listTable",staticClass:"rescue-manage-list table-wrapper"},[e("AiotList",{attrs:{totalNum:a.totalNum,isFull:!0,sizeType:a.sizeType},on:{changePage:a.changePage}},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:a.tableData,"header-row-class-name":"aiot-table-list-header","row-class-name":"aiot-table-list-row","tooltip-effect":"light",height:"100%"}},[a._l(a.columns,(function(t,s){return[e("el-table-column",{key:t.key+s,attrs:{prop:t.key,label:t.label,width:t.width,formatter:a.formatterColumn,"show-overflow-tooltip":!0}})]})),e("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:a._u([{key:"default",fn:function(t){return[e("span",{staticClass:"rescue-manage-list-operate operate2",on:{click:function(e){return a.showModal(t.row)}}})]}}])})],2)],1)],1),e("el-dialog",{attrs:{visible:a.modalShow,width:"1300px",title:"救援管理",center:"","custom-class":"aiot-modal","append-to-body":!0},on:{"update:visible":function(t){a.modalShow=t}}},[e("RescueDetail",{attrs:{modalInfo:a.detailModalInfo}})],1)],1)},i=[],n=e("c7eb"),c=e("1da1"),l=(e("d81d"),e("b0c0"),e("d3b7"),e("159b"),e("c1df")),r=e.n(l),o=e("1086"),u=e("1065"),d=e("82cb"),p=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"brandreth-rescue-modal clearfix"},[e("article",{staticClass:"rescue-lf"},[e("AiotMap",{attrs:{isControl:!1},on:{mapOperate:a.mapOperate}})],1),e("article",{staticClass:"rescue-lr"},[a._m(0),e("div",{staticClass:"rescue-notice"},[a._v("上传救援信息")]),e("div",{staticClass:"rescue-battery"},[e("Battery",{attrs:{batteryLay:"vertical",batteryNum:a.electricity||0}})],1)])])},m=[function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("ul",{staticClass:"rescue-data-list clearfix"},[e("li",{staticClass:"rescue-data-li clearfix"},[e("span",{staticClass:"data-name"},[a._v("设备编号：")]),e("span",{staticClass:"data-value"})]),e("li",{staticClass:"rescue-data-li clearfix"},[e("span",{staticClass:"data-name"},[a._v("设备状态：")]),e("span",{staticClass:"data-value"})]),e("li",{staticClass:"rescue-data-li clearfix"},[e("span",{staticClass:"data-name"},[a._v("关联车主：")]),e("span",{staticClass:"data-value"})]),e("li",{staticClass:"rescue-data-li clearfix"},[e("span",{staticClass:"data-name"},[a._v("联系方式：")]),e("span",{staticClass:"data-value"})]),e("li",{staticClass:"rescue-data-li clearfix"},[e("span",{staticClass:"data-name"},[a._v("关联保险公司：")]),e("span",{staticClass:"data-value"})]),e("li",{staticClass:"rescue-data-li clearfix"},[e("span",{staticClass:"data-name"},[a._v("关联保险单号：")]),e("span",{staticClass:"data-value"})]),e("li",{staticClass:"rescue-data-li clearfix"},[e("span",{staticClass:"data-name"},[a._v("开机时间：")]),e("span",{staticClass:"data-value"})]),e("li",{staticClass:"rescue-data-li clearfix"},[e("span",{staticClass:"data-name"},[a._v("车辆型号：")]),e("span",{staticClass:"data-value"})]),e("li",{staticClass:"rescue-data-li clearfix"},[e("span",{staticClass:"data-name"},[a._v("关联4S店：")]),e("span",{staticClass:"data-value"})]),e("li",{staticClass:"rescue-data-li clearfix"},[e("span",{staticClass:"data-name"},[a._v("保险到期时间：")]),e("span",{staticClass:"data-value"})]),e("li",{staticClass:"rescue-data-li clearfix"},[e("span",{staticClass:"data-name"},[a._v("设备请求救援时间：")]),e("span",{staticClass:"data-value"})]),e("li",{staticClass:"rescue-data-li clearfix"},[e("span",{staticClass:"data-name"},[a._v("救援处理时间：")]),e("span",{staticClass:"data-value"})]),e("li",{staticClass:"rescue-data-li clearfix"},[e("span",{staticClass:"data-name"},[a._v("救援状态：")]),e("span",{staticClass:"data-value"})]),e("li",{staticClass:"rescue-data-li clearfix"},[e("span",{staticClass:"data-name"},[a._v("救援人员联系方式：")]),e("span",{staticClass:"data-value"})])])}],f=e("95a1"),h=e("8e5c"),v=e("98c8"),b=e("10c7"),g=e.n(b),C=e("8f22"),y=e.n(C),w=e("d192"),_=e.n(w),k=e("46bf"),x=e.n(k),O=e("7bc2"),j=e("bc3a"),L=e.n(j),S={name:"equipDetail",props:{modalInfo:{type:Object}},components:{AiotMap:h["a"],Battery:v["a"]},data:function(){return this.alertIsEndHash={0:"未解除",1:"解除"},this.deviceStatusHash={0:"正常",1:"碰撞",2:"倾倒",3:"离线"},{data:{},electricity:100,loading:!1,logLoading:!1,loadWarn:!1,localWarn:!1,localFrash:!0,tableData:[],pageNum:1,pageSize:50,count:0,formatVal:o["d"]}},watch:{"modalInfo.show":{handler:function(a){a&&(this.tableData=[],this.data={},this.pageNum=1,this.getDetail(this.modalInfo.id),this.getLog(this.modalInfo.id))},immediate:!0}},methods:{setMap:function(){if(this.AMap&&this.map&&this.data&&this.data.lng&&this.data.lat){var a=new this.AMap.Marker({icon:this.getMarkerIcon(this.data.deviceType,this.data.deviceStatus),anchor:"bottom-center",position:new this.AMap.LngLat(this.data.lng,this.data.lat)});this.map.add(a),this.map.setCenter(a.getPosition())}},getMarkerIcon:function(a,t){switch(a){case 1:switch(t){case 0:return y.a;case 1:return g.a;case 2:return g.a;case 3:return g.a;default:return y.a}case 2:switch(t){case 0:return x.a;default:return _.a}default:return y.a}},mapOperate:function(a){var t=this;return Object(c["a"])(Object(n["a"])().mark((function e(){return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.map=a,e.next=3,Object(f["a"])();case 3:t.AMap=e.sent;case 4:case"end":return e.stop()}}),e)})))()},getDetail:function(a){var t=this;return Object(c["a"])(Object(n["a"])().mark((function e(){var s;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.detailCancel&&(t.detailCancel(),t.detailCancel=null),t.loading=!0,e.next=4,Object(O["b"])({device_id:a},{cancelToken:new L.a.CancelToken((function(a){t.detailCancel=a}))});case 4:s=e.sent,t.loading=!1,t.data=s,t.setMap();case 8:case"end":return e.stop()}}),e)})))()},getLog:function(a){var t=this;return Object(c["a"])(Object(n["a"])().mark((function e(){var s;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.logCancel&&(t.logCancel(),t.logCancel=null),t.logLoading=!0,e.next=4,Object(O["c"])({device_id:a,page_num:t.pageNum,page_size:50},{cancelToken:new L.a.CancelToken((function(a){t.logCancel=a}))});case 4:s=e.sent,t.logLoading=!1,t.tableData=s.data||[],t.total=s.meta.count||0;case 8:case"end":return e.stop()}}),e)})))()},pageChange:function(a){this.pageNum=a,this.getLog(this.modalInfo.id)}}},N=S,z=(e("e5dd"),e("2877")),D=Object(z["a"])(N,p,m,!1,null,"0a796bd8",null),M=D.exports,I=e("bced"),T={components:{AiotList:d["a"],RescueDetail:M},data:function(){return{locationData:u["a"],province:"",city:"",id:"",management:"",managementList:[],status:"",cityList:[],statusList:[{name:"成功",value:!0},{name:"失败",value:!1}],time:"",modalShow:!1,detailModalInfo:{},totalNum:0,pageSize:10,sizeType:1,pageNumber:1,tableData:[],columns:[{label:"救援编号",key:"id"},{label:"设备编号",key:"imei"},{label:"发生时间",key:"eventTime"},{label:"处理状态",key:"evtState"},{label:"相关车辆",key:"plateNum"},{label:"车主姓名",key:"vehicleOwnerName"},{label:"联系电话",key:"phone"},{label:"关联保单",key:"insurancePolicyNum"}],formatVal:o["d"]}},computed:{provinceList:function(){var a=u["a"].map((function(a){var t={name:a.name,id:a.id};return t}));return a}},methods:{changeProvince:function(){var a=this;this.province?u["a"].forEach((function(t){t.id===a.province&&(a.cityList=t.children||[])})):this.cityList=[]},addPartner:function(){},showModal:function(a){this.detailModalInfo=a,this.modalShow=!0},changePage:function(a){switch(a.type){case"number":this.pageNumber=a.value;break;case"size":this.pageSize=a.value;break;default:break}this.searchData()},searchData:function(){var a=this;return Object(c["a"])(Object(n["a"])().mark((function t(){var e,s,i,c;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=a.time?r()("".concat(a.time," 00:00:00")).valueOf():void 0,s=a.time?r()("".concat(a.time," 23:59:59")).valueOf():void 0,i={evtId:a.id,evtState:a.state,beginDate:e,endDate:s,pageNum:a.pageNumber,pageCount:a.pageSize},a.loading=!0,t.next=6,Object(I["b"])(i);case 6:c=t.sent,a.loading=!1,a.tableData=c.records,a.totalNum=c.total;case 10:case"end":return t.stop()}}),t)})))()},formatterColumn:function(a,t){var e=t.property,s="";switch(e){case"evtState":s=!0===a[e]?"成功":"失败";break;default:s=a[e];break}return Object(o["d"])(s)}},mounted:function(){this.time="2021-01-05",this.searchData()}},P=T,A=(e("0a34"),e("780b"),Object(z["a"])(P,s,i,!1,null,"27c55c64",null));t["default"]=A.exports},dd6c:function(a,t,e){},e5dd:function(a,t,e){"use strict";e("ff70")},ff70:function(a,t,e){}}]);